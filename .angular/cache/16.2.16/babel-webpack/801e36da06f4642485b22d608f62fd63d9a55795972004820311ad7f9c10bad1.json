{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../athentification.service\";\nimport * as i2 from \"@angular/router\";\nexport class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n  }\n  login(data) {\n    // Vérifiez si les champs nécessaires sont présents avant d'envoyer la requête\n    if (!data.email || !data.password) {\n      console.error('Les champs email et password sont requis.');\n      return;\n    }\n    this.authService.singin(data).subscribe(response => {\n      console.log('Réponse reçue:', response);\n      // Vérifiez si user et role existent avant de les utiliser\n      if (response && response.user && response.user.role) {\n        // Stockage des informations dans le localStorage\n        localStorage.setItem('access_token', response.accessToken);\n        localStorage.setItem('role', response.user.role);\n        if (response.user.role === 'ROLE_ADMIN') {\n          this.router.navigate(['/dashboard']);\n        }\n      }\n    }, error => {\n      // Gestion des erreurs serveur ou réseau\n      if (error.status === 400) {\n        console.error('Requête invalide. Vérifiez les données envoyées.');\n      } else {\n        console.error('Erreur lors de la connexion :', error);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AthentificationService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 6,\n      vars: 0,\n      consts: [[3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [\"type\", \"email\", \"placeholder\", \"Email\", \"name\", \"email\", \"ngModel\", \"\", \"required\", \"\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"name\", \"password\", \"ngModel\", \"\", \"required\", \"\"], [\"type\", \"submit\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"form\", 0, 1);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_0_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const _r0 = i0.ɵɵreference(1);\n            return i0.ɵɵresetView(ctx.login(_r0.value));\n          });\n          i0.ɵɵelement(2, \"input\", 2)(3, \"input\", 3);\n          i0.ɵɵelementStart(4, \"button\", 4);\n          i0.ɵɵtext(5, \"Login\");\n          i0.ɵɵelementEnd()();\n        }\n      },\n      styles: [\"\\n\\nform[_ngcontent-%COMP%] {\\n    width: 300px; \\n\\n    margin: 0 auto; \\n\\n    padding: 20px; \\n\\n    border: 1px solid #ccc; \\n\\n    border-radius: 5px; \\n\\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); \\n\\n    background-color: #f9f9f9; \\n\\n}\\n\\n\\n\\ninput[type=\\\"email\\\"][_ngcontent-%COMP%], input[type=\\\"password\\\"][_ngcontent-%COMP%] {\\n    width: 100%; \\n\\n    padding: 10px; \\n\\n    margin: 10px 0; \\n\\n    border: 1px solid #ccc; \\n\\n    border-radius: 4px; \\n\\n}\\n\\n\\n\\nbutton[_ngcontent-%COMP%] {\\n    width: 100%; \\n\\n    padding: 10px; \\n\\n    background-color: #4CAF50; \\n\\n    color: white; \\n\\n    border: none; \\n\\n    border-radius: 4px; \\n\\n    cursor: pointer; \\n\\n}\\n\\n\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n    background-color: #45a049; \\n\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3QkFBd0I7QUFDeEI7SUFDSSxZQUFZLEVBQUUsMEJBQTBCO0lBQ3hDLGNBQWMsRUFBRSwwQkFBMEI7SUFDMUMsYUFBYSxFQUFFLHlCQUF5QjtJQUN4QyxzQkFBc0IsRUFBRSwwQkFBMEI7SUFDbEQsa0JBQWtCLEVBQUUsbUJBQW1CO0lBQ3ZDLHlDQUF5QyxFQUFFLFVBQVU7SUFDckQseUJBQXlCLEVBQUUsb0JBQW9CO0FBQ25EOztBQUVBLCtCQUErQjtBQUMvQjs7SUFFSSxXQUFXLEVBQUUscUJBQXFCO0lBQ2xDLGFBQWEsRUFBRSx5QkFBeUI7SUFDeEMsY0FBYyxFQUFFLGdDQUFnQztJQUNoRCxzQkFBc0IsRUFBRSx1QkFBdUI7SUFDL0Msa0JBQWtCLEVBQUUsbUJBQW1CO0FBQzNDOztBQUVBLG9CQUFvQjtBQUNwQjtJQUNJLFdBQVcsRUFBRSxxQkFBcUI7SUFDbEMsYUFBYSxFQUFFLHlCQUF5QjtJQUN4Qyx5QkFBeUIsRUFBRSxvQkFBb0I7SUFDL0MsWUFBWSxFQUFFLHFCQUFxQjtJQUNuQyxZQUFZLEVBQUUsbUJBQW1CO0lBQ2pDLGtCQUFrQixFQUFFLG1CQUFtQjtJQUN2QyxlQUFlLEVBQUUsb0JBQW9CO0FBQ3pDOztBQUVBLDhCQUE4QjtBQUM5QjtJQUNJLHlCQUF5QixFQUFFLHNCQUFzQjtBQUNyRCIsInNvdXJjZXNDb250ZW50IjpbIi8qIFN0eWxlIGR1IGZvcm11bGFpcmUgKi9cclxuZm9ybSB7XHJcbiAgICB3aWR0aDogMzAwcHg7IC8qIExhcmdldXIgZHUgZm9ybXVsYWlyZSAqL1xyXG4gICAgbWFyZ2luOiAwIGF1dG87IC8qIENlbnRyZXIgbGUgZm9ybXVsYWlyZSAqL1xyXG4gICAgcGFkZGluZzogMjBweDsgLyogRXNwYWNlbWVudCBpbnTDg8KpcmlldXIgKi9cclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IC8qIEJvcmR1cmUgZHUgZm9ybXVsYWlyZSAqL1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4OyAvKiBDb2lucyBhcnJvbmRpcyAqL1xyXG4gICAgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7IC8qIE9tYnJlICovXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjlmOWY5OyAvKiBDb3VsZXVyIGRlIGZvbmQgKi9cclxufVxyXG5cclxuLyogU3R5bGUgZGVzIGNoYW1wcyBkZSBzYWlzaWUgKi9cclxuaW5wdXRbdHlwZT1cImVtYWlsXCJdLFxyXG5pbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0ge1xyXG4gICAgd2lkdGg6IDEwMCU7IC8qIExhcmdldXIgY29tcGzDg8KodGUgKi9cclxuICAgIHBhZGRpbmc6IDEwcHg7IC8qIEVzcGFjZW1lbnQgaW50w4PCqXJpZXVyICovXHJcbiAgICBtYXJnaW46IDEwcHggMDsgLyogRXNwYWNlbWVudCBlbnRyZSBsZXMgY2hhbXBzICovXHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyAvKiBCb3JkdXJlIGRlcyBjaGFtcHMgKi9cclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDsgLyogQ29pbnMgYXJyb25kaXMgKi9cclxufVxyXG5cclxuLyogU3R5bGUgZHUgYm91dG9uICovXHJcbmJ1dHRvbiB7XHJcbiAgICB3aWR0aDogMTAwJTsgLyogTGFyZ2V1ciBjb21wbMODwqh0ZSAqL1xyXG4gICAgcGFkZGluZzogMTBweDsgLyogRXNwYWNlbWVudCBpbnTDg8KpcmlldXIgKi9cclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7IC8qIENvdWxldXIgZGUgZm9uZCAqL1xyXG4gICAgY29sb3I6IHdoaXRlOyAvKiBDb3VsZXVyIGR1IHRleHRlICovXHJcbiAgICBib3JkZXI6IG5vbmU7IC8qIFBhcyBkZSBib3JkdXJlICovXHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7IC8qIENvaW5zIGFycm9uZGlzICovXHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7IC8qIEN1cnNldXIgcG9pbnRlciAqL1xyXG59XHJcblxyXG4vKiBFZmZldCBhdSBzdXJ2b2wgZHUgYm91dG9uICovXHJcbmJ1dHRvbjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDVhMDQ5OyAvKiBDb3VsZXVyIGF1IHN1cnZvbCAqL1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["LoginComponent","constructor","authService","router","login","data","email","password","console","error","singin","subscribe","response","log","user","role","localStorage","setItem","accessToken","navigate","status","i0","ɵɵdirectiveInject","i1","AthentificationService","i2","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","LoginComponent_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r1","_r0","ɵɵreference","ɵɵresetView","value","ɵɵelement","ɵɵtext","ɵɵelementEnd"],"sources":["C:\\Users\\walaa\\Downloads\\auth-main\\auth-main\\src\\app\\login\\login.component.ts","C:\\Users\\walaa\\Downloads\\auth-main\\auth-main\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AthentificationService } from '../athentification.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  constructor(private authService: AthentificationService , private router: Router ) {}\n\n  login(data: any): void {\n    // Vérifiez si les champs nécessaires sont présents avant d'envoyer la requête\n    if (!data.email || !data.password) {\n      console.error('Les champs email et password sont requis.');\n      return;\n    }\n\n    this.authService.singin(data).subscribe(\n      (response) => {\n        console.log('Réponse reçue:', response);\n\n        // Vérifiez si user et role existent avant de les utiliser\n        if (response && response.user && response.user.role) {\n          // Stockage des informations dans le localStorage\n          localStorage.setItem('access_token', response.accessToken);\n          localStorage.setItem('role', response.user.role);\n          if (response.user.role === 'ROLE_ADMIN') {\n            this.router.navigate(['/dashboard']);\n          }\n        }\n      },\n      (error) => {\n        // Gestion des erreurs serveur ou réseau\n        if (error.status === 400) {\n          console.error('Requête invalide. Vérifiez les données envoyées.');\n        } else {\n          console.error('Erreur lors de la connexion :', error);\n        }\n      }\n    );\n  }\n}\n","<form (ngSubmit)=\"login(loginForm.value)\" #loginForm=\"ngForm\">\n  <input type=\"email\" placeholder=\"Email\" name=\"email\" ngModel required>\n  <input type=\"password\" placeholder=\"Password\" name=\"password\" ngModel required>\n  <button type=\"submit\">Login</button>\n</form>\n\n"],"mappings":";;;AASA,OAAM,MAAOA,cAAc;EACzBC,YAAoBC,WAAmC,EAAWC,MAAc;IAA5D,KAAAD,WAAW,GAAXA,WAAW;IAAmC,KAAAC,MAAM,GAANA,MAAM;EAAY;EAEpFC,KAAKA,CAACC,IAAS;IACb;IACA,IAAI,CAACA,IAAI,CAACC,KAAK,IAAI,CAACD,IAAI,CAACE,QAAQ,EAAE;MACjCC,OAAO,CAACC,KAAK,CAAC,2CAA2C,CAAC;MAC1D;;IAGF,IAAI,CAACP,WAAW,CAACQ,MAAM,CAACL,IAAI,CAAC,CAACM,SAAS,CACpCC,QAAQ,IAAI;MACXJ,OAAO,CAACK,GAAG,CAAC,gBAAgB,EAAED,QAAQ,CAAC;MAEvC;MACA,IAAIA,QAAQ,IAAIA,QAAQ,CAACE,IAAI,IAAIF,QAAQ,CAACE,IAAI,CAACC,IAAI,EAAE;QACnD;QACAC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEL,QAAQ,CAACM,WAAW,CAAC;QAC1DF,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEL,QAAQ,CAACE,IAAI,CAACC,IAAI,CAAC;QAChD,IAAIH,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,YAAY,EAAE;UACvC,IAAI,CAACZ,MAAM,CAACgB,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;;;IAG1C,CAAC,EACAV,KAAK,IAAI;MACR;MACA,IAAIA,KAAK,CAACW,MAAM,KAAK,GAAG,EAAE;QACxBZ,OAAO,CAACC,KAAK,CAAC,kDAAkD,CAAC;OAClE,MAAM;QACLD,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;;IAEzD,CAAC,CACF;EACH;;;uBAjCWT,cAAc,EAAAqB,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,sBAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;EAAA;;;YAAd1B,cAAc;MAAA2B,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;UCT3BZ,EAAA,CAAAc,cAAA,iBAA8D;UAAxDd,EAAA,CAAAe,UAAA,sBAAAC,iDAAA;YAAAhB,EAAA,CAAAiB,aAAA,CAAAC,GAAA;YAAA,MAAAC,GAAA,GAAAnB,EAAA,CAAAoB,WAAA;YAAA,OAAYpB,EAAA,CAAAqB,WAAA,CAAAR,GAAA,CAAA9B,KAAA,CAAAoC,GAAA,CAAAG,KAAA,CAAsB;UAAA,EAAC;UACvCtB,EAAA,CAAAuB,SAAA,eAAsE;UAEtEvB,EAAA,CAAAc,cAAA,gBAAsB;UAAAd,EAAA,CAAAwB,MAAA,YAAK;UAAAxB,EAAA,CAAAyB,YAAA,EAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}